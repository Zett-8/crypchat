<!DOCTYPE html>
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>CrypChat</title>
<meta charset="utf-8">
<meta name="description" content="">
<meta name="author" content="">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="">

</head>
<body>
    <h1>
        CrypChat
    </h1>

    <input id="username" type="text" />
    <input id="crypto" type="text" />
    <input id="message" type="text" />
    <button onclick="send()">send</button>
    <pre id="output"></pre>
    <script>
        var username = document.getElementById("username")
        var crypto = document.getElementById("crypto")
        var message = document.getElementById("message")
        var output = document.getElementById("output")
        var socket = new WebSocket("ws://localhost:8080/ws")

        socket.onopen = () => output.innerHTML += "Status: Connected\n"
        socket.onmessage = e => {
            data = JSON.parse(e.data)
            output.innerHTML += (data.username ? data.username : "anonymous") + ": " + data.message + "\n"
        }
        function send() {
            socket.send(JSON.stringify({username: username.value, message: message.value}))
            message.value = ""
        }
    </script>
</body>
</html>